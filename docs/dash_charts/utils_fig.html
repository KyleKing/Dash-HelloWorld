<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.4" />
<title>dash_charts.utils_fig API documentation</title>
<meta name="description" content="Utilities for custom Dash figures." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
<style>
a {
text-decoration: underline;
}
h1,h2,h3,h4 {
font-weight: 400;
}
h2 {
margin: 0.50em 0 .25em 0;
}
dd p {
margin: 5px 0;
}
dl dl:last-child {
margin-bottom: 2.5em;
}
main {
margin-bottom: 80vh;
}
#content {
max-width: 1100px;
}
.source summary {
background-color: #fafafa; /* match HLJS background */
padding: 1px 5px;
}
.source summary:focus {
outline: none !important;
}
.source pre {
background-color: #fafafa; /* match HLJS background */
}
.source pre code {
padding-bottom: 1em;
}
table, th, td {
border: 1px solid #d4d4d4;
padding: 0 5px;
}
</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>dash_charts.utils_fig</code></h1>
</header>
<section id="section-intro">
<p>Utilities for custom Dash figures.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Utilities for custom Dash figures.&#34;&#34;&#34;

import dash_core_components as dcc
import plotly.graph_objects as go
import plotly.tools as tls
from plotly.subplots import make_subplots

from .dash_helpers import validate

FIGURE_PLACEHOLDER = {&#39;data&#39;: [], &#39;layout&#39;: {}, &#39;frames&#39;: []}
&#34;&#34;&#34;Figure placeholder.&#34;&#34;&#34;


def min_graph(config=None, figure=FIGURE_PLACEHOLDER, **kwargs):
    &#34;&#34;&#34;Return dcc.Graph element with Plotly overlay removed.

    See: https://community.plot.ly/t/is-it-possible-to-hide-the-floating-toolbar/4911/7

    Args:
        config: dictionary passed to `dcc.Graph`. Default is to disable the `displayModeBar`
        figure: figure argument. Default is an empty placeholder (`FIGURE_PLACEHOLDER`)
        kwargs: any kwargs to pass to the dash initializer other than `assets_folder`

    Returns:
        dict: Dash `dcc.Graph` object

    &#34;&#34;&#34;
    if config is None:
        config = {&#39;displayModeBar&#39;: False}
    return dcc.Graph(config=config, figure=figure, **kwargs)


def convert_matplolib(fig):
    &#34;&#34;&#34;Convert a matplotlib chart to a plotly figure.

    WARN: Use Matplolib &lt;3.2 until https://github.com/plotly/plotly.py/issues/1568 is resolved

    If using &gt;3.3, may see an error: `AttributeError: &#39;Spine&#39; object has no attribute &#39;is_frame_like&#39;`

    ```py
    # Create Example Plot of a Sine Wave
    x_coords = np.arange(0, math.pi * 2, 0.05)
    plt.plot(x_coords, np.sin(x_coords))
    plt.xlabel(&#39;Angle&#39;)
    plt.ylabel(&#39;Sine&#39;)
    plt.title(&#39;Sine Wave&#39;)

    # Convert to Plotly and show
    plotly_fig = convert_matplolib(fig)
    plotly_fig.show()
    ```

    Args:
        fig: matplotlib figure

    Returns:
        figure: Plotly figure for plotting (try: `.show()` or `.to_dict()`)

    &#34;&#34;&#34;
    return tls.mpl_to_plotly(fig)


def check_raw_data(df_raw, min_keys):
    &#34;&#34;&#34;Verify that dataframe contains the minimum columns.

    Args:
        df_raw: data to pass to formatter method
        min_keys: list of string column names expected in dataframe

    Raises:
        RuntimeError: if any columns are missing from dataframe

    &#34;&#34;&#34;
    all_keys = df_raw.keys()
    if len([_k for _k in min_keys if _k in all_keys]) != len(min_keys):
        raise RuntimeError(f&#39;`df_raw` must have keys {min_keys}. Found: {all_keys}&#39;)


def make_dict_an(coord, text, label=None, color=None, y_offset=10):
    &#34;&#34;&#34;Create stylized chart annotation.

    Args:
        coord: tuple of x and y coordinate
        text: string text for annotation
        label: string label shown on hover
        color: string color. If None (default), will revert to black
        y_offset: offset in yaxis for annotation

    Returns:
        dict: keyword arguments for `go.layout.Annotation`

    &#34;&#34;&#34;
    return {
        &#39;arrowcolor&#39;: &#39;black&#39; if color is None else color,
        &#39;arrowhead&#39;: 7,
        &#39;arrowsize&#39;: 0.3,
        &#39;arrowwidth&#39;: 1.5,
        &#39;ax&#39;: coord[0],
        &#39;axref&#39;: &#39;x&#39;,
        &#39;ay&#39;: coord[1] + y_offset,
        &#39;ayref&#39;: &#39;y&#39;,
        &#39;bgcolor&#39;: &#39;black&#39; if color is None else color,
        &#39;bordercolor&#39;: &#39;black&#39; if color is None else color,
        &#39;borderpad&#39;: 2,
        &#39;borderwidth&#39;: 1,
        &#39;font&#39;: {&#39;color&#39;: &#39;#ffffff&#39;},
        &#39;hovertext&#39;: label,
        &#39;opacity&#39;: 0.8,
        &#39;showarrow&#39;: True,
        &#39;text&#39;: text,
        &#39;x&#39;: coord[0],
        &#39;xref&#39;: &#39;x&#39;,
        &#39;y&#39;: coord[1],
        &#39;yref&#39;: &#39;y&#39;,
    }


class CustomChart:  # noqa: H601
    &#34;&#34;&#34;Base Class for Custom Charts.&#34;&#34;&#34;

    annotations = []
    &#34;&#34;&#34;Store annotations. Default is an empty list.

    See documentation: https://plot.ly/python/reference/#layout-annotations

    &#34;&#34;&#34;

    _axis_range = {}
    _axis_range_schema = {
        &#39;x&#39;: {
            &#39;items&#39;: [{&#39;type&#39;: [&#39;integer&#39;, &#39;float&#39;, &#39;string&#39;]}, {&#39;type&#39;: [&#39;integer&#39;, &#39;float&#39;, &#39;string&#39;]}],
            &#39;required&#39;: False,
            &#39;type&#39;: &#39;list&#39;,
        },
        &#39;y&#39;: {
            &#39;items&#39;: [{&#39;type&#39;: [&#39;integer&#39;, &#39;float&#39;]}, {&#39;type&#39;: [&#39;integer&#39;, &#39;float&#39;]}],
            &#39;required&#39;: False,
            &#39;type&#39;: &#39;list&#39;,
        },
    }

    @property
    def axis_range(self):
        &#34;&#34;&#34;Specify x/y axis range or leave as empty dictionary for autorange.

        Returns:
            dict: dictionary potentially with keys `(x, y)`

        &#34;&#34;&#34;
        return self._axis_range

    @axis_range.setter
    def axis_range(self, axis_range):
        errors = validate(axis_range, self._axis_range_schema)
        if errors:
            raise RuntimeError(f&#39;Validation of self.axis_range failed: {errors}&#39;)
        # Assign new axis_range
        self._axis_range = axis_range

    def __init__(self, *, title, xlabel, ylabel, layout_overrides=()):
        &#34;&#34;&#34;Initialize Custom Dash Chart and store parameters as data members.

        Args:
            title: String title for chart (can be an empty string for blank)
            xlabel: XAxis string label (can be an empty string for blank)
            ylabel: YAxis string label (can be an empty string for blank)
            layout_overrides: Custom parameters in format [ParentKey, SubKey, Value] to customize &#39;go.layout&#39;

        &#34;&#34;&#34;
        self.title = title
        self.labels = {&#39;x&#39;: xlabel, &#39;y&#39;: ylabel}
        self.layout_overrides = layout_overrides
        self.initialize_mutables()

    def initialize_mutables(self):
        &#34;&#34;&#34;Initialize the mutable data members to prevent modifying one attribute and impacting all instances.&#34;&#34;&#34;
        pass

    def create_figure(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Create the figure dictionary.

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Returns:
            dict: keys `data` and `layout` for Dash

        &#34;&#34;&#34;
        return {
            &#39;data&#39;: self.create_traces(df_raw, **kwargs_data),
            &#39;layout&#39;: go.Layout(self.apply_custom_layout(self.create_layout())),
        }

    def create_traces(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Return traces for plotly chart.

        Should return, list: trace data points. List may be empty

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Raises:
            NotImplementedError: Must be overridden by child class

        &#34;&#34;&#34;
        raise NotImplementedError(&#39;create_traces must be implemented by child class&#39;)  # pragma: no cover

    def create_layout(self):
        &#34;&#34;&#34;Return the standard layout. Can be overridden and modified when inherited.

        Returns:
            dict: layout for Dash figure

        &#34;&#34;&#34;
        layout = {
            &#39;annotations&#39;: self.annotations,
            &#39;title&#39;: go.layout.Title(text=self.title),
            &#39;xaxis&#39;: {
                &#39;automargin&#39;: True,
                &#39;title&#39;: self.labels[&#39;x&#39;],
            },
            &#39;yaxis&#39;: {
                &#39;automargin&#39;: True,
                &#39;title&#39;: self.labels[&#39;y&#39;],
                &#39;zeroline&#39;: True,
            },
            &#39;legend&#39;: {&#39;orientation&#39;: &#39;h&#39;, &#39;y&#39;: -0.25},  # below XAxis label
            &#39;hovermode&#39;: &#39;closest&#39;,
        }

        # Optionally apply the specified range
        for axis in [&#39;x&#39;, &#39;y&#39;]:
            axis_name = f&#39;{axis}axis&#39;
            if axis in self.axis_range:
                layout[axis_name][&#39;range&#39;] = self.axis_range[axis]
            else:
                layout[axis_name][&#39;autorange&#39;] = True

        return layout

    def apply_custom_layout(self, layout):
        &#34;&#34;&#34;Extend and/or override layout with custom settings.

        Args:
            layout: base layout dictionary. Typically from self.create_layout()

        Returns:
            dict: layout for Dash figure

        &#34;&#34;&#34;
        for parent_key, sub_key, value in self.layout_overrides:
            if sub_key is not None:
                layout[parent_key][sub_key] = value
            else:
                layout[parent_key] = value

        return layout


class MarginalChart(CustomChart):  # noqa: H601
    &#34;&#34;&#34;Base Class for Custom Charts with Marginal X and Marginal Y Plots.&#34;&#34;&#34;

    def create_figure(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Create the figure dictionary.

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Returns:
            dict: Dash figure object

        &#34;&#34;&#34;
        # Initialize figure with subplots
        fig = make_subplots(
            rows=2, cols=2,
            shared_xaxes=True, shared_yaxes=True,
            vertical_spacing=0.02, horizontal_spacing=0.02,
            row_width=[0.8, 0.2], column_width=[0.8, 0.2],
        )
        # Populate the traces of each subplot
        traces = [
            (self.create_traces, 2, 1),
            (self.create_marg_top, 1, 1),
            (self.create_marg_right, 2, 2),
        ]
        for trace_func, row, col in traces:
            for trace in trace_func(df_raw, **kwargs_data):
                fig.add_trace(trace, row, col)
        # Apply axis labels
        fig.update_xaxes(title_text=self.labels[&#39;x&#39;], row=2, col=1)
        fig.update_yaxes(title_text=self.labels[&#39;y&#39;], row=2, col=1)
        # Replace the default blue/white grid introduced in Plotly v4
        fig.update_xaxes(showgrid=True, gridcolor=&#39;white&#39;)
        fig.update_yaxes(showgrid=True, gridcolor=&#39;white&#39;)
        fig[&#39;layout&#39;].update(self.apply_custom_layout(self.create_layout()))
        return fig

    def create_traces(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Return traces for the main plotly chart.

        Should return, list: trace data points. List may be empty

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Raises:
            NotImplementedError: Must be overridden by child class

        &#34;&#34;&#34;
        raise NotImplementedError(&#39;create_traces must be implemented by child class&#39;)  # pragma: no cover

    def create_marg_top(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Return traces for the top marginal chart.

        Should return, list: trace data points. List may be empty

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Raises:
            NotImplementedError: Must be overridden by child class

        &#34;&#34;&#34;
        raise NotImplementedError(&#39;create_marg_top must be implemented by child class&#39;)  # pragma: no cover

    def create_marg_right(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Return traces for the right marginal chart.

        Should return, list: trace data points. List may be empty

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Raises:
            NotImplementedError: Must be overridden by child class

        &#34;&#34;&#34;
        raise NotImplementedError(&#39;create_marg_right must be implemented by child class&#39;)  # pragma: no cover

    def create_layout(self, *, bg_color=&#39;#F0F0F0&#39;):
        &#34;&#34;&#34;Remove axis lables from base layout as they would be applied to (row=1,col=1).

        Args:
            bg_color: Background color for the chart. Default is white for light themes

        Returns:
            dict: updated layout for Dash figure

        &#34;&#34;&#34;
        layout = super().create_layout()
        layout[&#39;xaxis&#39;][&#39;title&#39;] = &#39;&#39;
        layout[&#39;yaxis&#39;][&#39;title&#39;] = &#39;&#39;
        layout[&#39;plot_bgcolor&#39;] = bg_color
        return layout</code></pre>
</details>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-variables">Global variables</h2>
<dl>
<dt id="dash_charts.utils_fig.FIGURE_PLACEHOLDER"><code class="name">var <span class="ident">FIGURE_PLACEHOLDER</span></code></dt>
<dd>
<div class="desc"><p>Figure placeholder.</p></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="dash_charts.utils_fig.check_raw_data"><code class="name flex">
<span>def <span class="ident">check_raw_data</span></span>(<span>df_raw, min_keys)</span>
</code></dt>
<dd>
<div class="desc"><p>Verify that dataframe contains the minimum columns.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>df_raw</code></strong></dt>
<dd>data to pass to formatter method</dd>
<dt><strong><code>min_keys</code></strong></dt>
<dd>list of string column names expected in dataframe</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>RuntimeError</code></dt>
<dd>if any columns are missing from dataframe</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def check_raw_data(df_raw, min_keys):
    &#34;&#34;&#34;Verify that dataframe contains the minimum columns.

    Args:
        df_raw: data to pass to formatter method
        min_keys: list of string column names expected in dataframe

    Raises:
        RuntimeError: if any columns are missing from dataframe

    &#34;&#34;&#34;
    all_keys = df_raw.keys()
    if len([_k for _k in min_keys if _k in all_keys]) != len(min_keys):
        raise RuntimeError(f&#39;`df_raw` must have keys {min_keys}. Found: {all_keys}&#39;)</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.convert_matplolib"><code class="name flex">
<span>def <span class="ident">convert_matplolib</span></span>(<span>fig)</span>
</code></dt>
<dd>
<div class="desc"><p>Convert a matplotlib chart to a plotly figure.</p>
<p>WARN: Use Matplolib &lt;3.2 until <a href="https://github.com/plotly/plotly.py/issues/1568">https://github.com/plotly/plotly.py/issues/1568</a> is resolved</p>
<p>If using &gt;3.3, may see an error: <code>AttributeError: 'Spine' object has no attribute 'is_frame_like'</code></p>
<pre><code class="py"># Create Example Plot of a Sine Wave
x_coords = np.arange(0, math.pi * 2, 0.05)
plt.plot(x_coords, np.sin(x_coords))
plt.xlabel('Angle')
plt.ylabel('Sine')
plt.title('Sine Wave')

# Convert to Plotly and show
plotly_fig = convert_matplolib(fig)
plotly_fig.show()
</code></pre>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>fig</code></strong></dt>
<dd>matplotlib figure</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>figure</code></dt>
<dd>Plotly figure for plotting (try: <code>.show()</code> or <code>.to_dict()</code>)</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def convert_matplolib(fig):
    &#34;&#34;&#34;Convert a matplotlib chart to a plotly figure.

    WARN: Use Matplolib &lt;3.2 until https://github.com/plotly/plotly.py/issues/1568 is resolved

    If using &gt;3.3, may see an error: `AttributeError: &#39;Spine&#39; object has no attribute &#39;is_frame_like&#39;`

    ```py
    # Create Example Plot of a Sine Wave
    x_coords = np.arange(0, math.pi * 2, 0.05)
    plt.plot(x_coords, np.sin(x_coords))
    plt.xlabel(&#39;Angle&#39;)
    plt.ylabel(&#39;Sine&#39;)
    plt.title(&#39;Sine Wave&#39;)

    # Convert to Plotly and show
    plotly_fig = convert_matplolib(fig)
    plotly_fig.show()
    ```

    Args:
        fig: matplotlib figure

    Returns:
        figure: Plotly figure for plotting (try: `.show()` or `.to_dict()`)

    &#34;&#34;&#34;
    return tls.mpl_to_plotly(fig)</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.make_dict_an"><code class="name flex">
<span>def <span class="ident">make_dict_an</span></span>(<span>coord, text, label=None, color=None, y_offset=10)</span>
</code></dt>
<dd>
<div class="desc"><p>Create stylized chart annotation.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>coord</code></strong></dt>
<dd>tuple of x and y coordinate</dd>
<dt><strong><code>text</code></strong></dt>
<dd>string text for annotation</dd>
<dt><strong><code>label</code></strong></dt>
<dd>string label shown on hover</dd>
<dt><strong><code>color</code></strong></dt>
<dd>string color. If None (default), will revert to black</dd>
<dt><strong><code>y_offset</code></strong></dt>
<dd>offset in yaxis for annotation</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>keyword arguments for <code>go.layout.Annotation</code></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def make_dict_an(coord, text, label=None, color=None, y_offset=10):
    &#34;&#34;&#34;Create stylized chart annotation.

    Args:
        coord: tuple of x and y coordinate
        text: string text for annotation
        label: string label shown on hover
        color: string color. If None (default), will revert to black
        y_offset: offset in yaxis for annotation

    Returns:
        dict: keyword arguments for `go.layout.Annotation`

    &#34;&#34;&#34;
    return {
        &#39;arrowcolor&#39;: &#39;black&#39; if color is None else color,
        &#39;arrowhead&#39;: 7,
        &#39;arrowsize&#39;: 0.3,
        &#39;arrowwidth&#39;: 1.5,
        &#39;ax&#39;: coord[0],
        &#39;axref&#39;: &#39;x&#39;,
        &#39;ay&#39;: coord[1] + y_offset,
        &#39;ayref&#39;: &#39;y&#39;,
        &#39;bgcolor&#39;: &#39;black&#39; if color is None else color,
        &#39;bordercolor&#39;: &#39;black&#39; if color is None else color,
        &#39;borderpad&#39;: 2,
        &#39;borderwidth&#39;: 1,
        &#39;font&#39;: {&#39;color&#39;: &#39;#ffffff&#39;},
        &#39;hovertext&#39;: label,
        &#39;opacity&#39;: 0.8,
        &#39;showarrow&#39;: True,
        &#39;text&#39;: text,
        &#39;x&#39;: coord[0],
        &#39;xref&#39;: &#39;x&#39;,
        &#39;y&#39;: coord[1],
        &#39;yref&#39;: &#39;y&#39;,
    }</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.min_graph"><code class="name flex">
<span>def <span class="ident">min_graph</span></span>(<span>config=None, figure={'data': [], 'layout': {}, 'frames': []}, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Return dcc.Graph element with Plotly overlay removed.</p>
<p>See: <a href="https://community.plot.ly/t/is-it-possible-to-hide-the-floating-toolbar/4911/7">https://community.plot.ly/t/is-it-possible-to-hide-the-floating-toolbar/4911/7</a></p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>config</code></strong></dt>
<dd>dictionary passed to <code>dcc.Graph</code>. Default is to disable the <code>displayModeBar</code></dd>
<dt><strong><code>figure</code></strong></dt>
<dd>figure argument. Default is an empty placeholder (<code><a title="dash_charts.utils_fig.FIGURE_PLACEHOLDER" href="#dash_charts.utils_fig.FIGURE_PLACEHOLDER">FIGURE_PLACEHOLDER</a></code>)</dd>
<dt><strong><code>kwargs</code></strong></dt>
<dd>any kwargs to pass to the dash initializer other than <code>assets_folder</code></dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Dash <code>dcc.Graph</code> object</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def min_graph(config=None, figure=FIGURE_PLACEHOLDER, **kwargs):
    &#34;&#34;&#34;Return dcc.Graph element with Plotly overlay removed.

    See: https://community.plot.ly/t/is-it-possible-to-hide-the-floating-toolbar/4911/7

    Args:
        config: dictionary passed to `dcc.Graph`. Default is to disable the `displayModeBar`
        figure: figure argument. Default is an empty placeholder (`FIGURE_PLACEHOLDER`)
        kwargs: any kwargs to pass to the dash initializer other than `assets_folder`

    Returns:
        dict: Dash `dcc.Graph` object

    &#34;&#34;&#34;
    if config is None:
        config = {&#39;displayModeBar&#39;: False}
    return dcc.Graph(config=config, figure=figure, **kwargs)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="dash_charts.utils_fig.CustomChart"><code class="flex name class">
<span>class <span class="ident">CustomChart</span></span>
<span>(</span><span>*, title, xlabel, ylabel, layout_overrides=())</span>
</code></dt>
<dd>
<div class="desc"><p>Base Class for Custom Charts.</p>
<p>Initialize Custom Dash Chart and store parameters as data members.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>title</code></strong></dt>
<dd>String title for chart (can be an empty string for blank)</dd>
<dt><strong><code>xlabel</code></strong></dt>
<dd>XAxis string label (can be an empty string for blank)</dd>
<dt><strong><code>ylabel</code></strong></dt>
<dd>YAxis string label (can be an empty string for blank)</dd>
<dt><strong><code>layout_overrides</code></strong></dt>
<dd>Custom parameters in format [ParentKey, SubKey, Value] to customize 'go.layout'</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CustomChart:  # noqa: H601
    &#34;&#34;&#34;Base Class for Custom Charts.&#34;&#34;&#34;

    annotations = []
    &#34;&#34;&#34;Store annotations. Default is an empty list.

    See documentation: https://plot.ly/python/reference/#layout-annotations

    &#34;&#34;&#34;

    _axis_range = {}
    _axis_range_schema = {
        &#39;x&#39;: {
            &#39;items&#39;: [{&#39;type&#39;: [&#39;integer&#39;, &#39;float&#39;, &#39;string&#39;]}, {&#39;type&#39;: [&#39;integer&#39;, &#39;float&#39;, &#39;string&#39;]}],
            &#39;required&#39;: False,
            &#39;type&#39;: &#39;list&#39;,
        },
        &#39;y&#39;: {
            &#39;items&#39;: [{&#39;type&#39;: [&#39;integer&#39;, &#39;float&#39;]}, {&#39;type&#39;: [&#39;integer&#39;, &#39;float&#39;]}],
            &#39;required&#39;: False,
            &#39;type&#39;: &#39;list&#39;,
        },
    }

    @property
    def axis_range(self):
        &#34;&#34;&#34;Specify x/y axis range or leave as empty dictionary for autorange.

        Returns:
            dict: dictionary potentially with keys `(x, y)`

        &#34;&#34;&#34;
        return self._axis_range

    @axis_range.setter
    def axis_range(self, axis_range):
        errors = validate(axis_range, self._axis_range_schema)
        if errors:
            raise RuntimeError(f&#39;Validation of self.axis_range failed: {errors}&#39;)
        # Assign new axis_range
        self._axis_range = axis_range

    def __init__(self, *, title, xlabel, ylabel, layout_overrides=()):
        &#34;&#34;&#34;Initialize Custom Dash Chart and store parameters as data members.

        Args:
            title: String title for chart (can be an empty string for blank)
            xlabel: XAxis string label (can be an empty string for blank)
            ylabel: YAxis string label (can be an empty string for blank)
            layout_overrides: Custom parameters in format [ParentKey, SubKey, Value] to customize &#39;go.layout&#39;

        &#34;&#34;&#34;
        self.title = title
        self.labels = {&#39;x&#39;: xlabel, &#39;y&#39;: ylabel}
        self.layout_overrides = layout_overrides
        self.initialize_mutables()

    def initialize_mutables(self):
        &#34;&#34;&#34;Initialize the mutable data members to prevent modifying one attribute and impacting all instances.&#34;&#34;&#34;
        pass

    def create_figure(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Create the figure dictionary.

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Returns:
            dict: keys `data` and `layout` for Dash

        &#34;&#34;&#34;
        return {
            &#39;data&#39;: self.create_traces(df_raw, **kwargs_data),
            &#39;layout&#39;: go.Layout(self.apply_custom_layout(self.create_layout())),
        }

    def create_traces(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Return traces for plotly chart.

        Should return, list: trace data points. List may be empty

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Raises:
            NotImplementedError: Must be overridden by child class

        &#34;&#34;&#34;
        raise NotImplementedError(&#39;create_traces must be implemented by child class&#39;)  # pragma: no cover

    def create_layout(self):
        &#34;&#34;&#34;Return the standard layout. Can be overridden and modified when inherited.

        Returns:
            dict: layout for Dash figure

        &#34;&#34;&#34;
        layout = {
            &#39;annotations&#39;: self.annotations,
            &#39;title&#39;: go.layout.Title(text=self.title),
            &#39;xaxis&#39;: {
                &#39;automargin&#39;: True,
                &#39;title&#39;: self.labels[&#39;x&#39;],
            },
            &#39;yaxis&#39;: {
                &#39;automargin&#39;: True,
                &#39;title&#39;: self.labels[&#39;y&#39;],
                &#39;zeroline&#39;: True,
            },
            &#39;legend&#39;: {&#39;orientation&#39;: &#39;h&#39;, &#39;y&#39;: -0.25},  # below XAxis label
            &#39;hovermode&#39;: &#39;closest&#39;,
        }

        # Optionally apply the specified range
        for axis in [&#39;x&#39;, &#39;y&#39;]:
            axis_name = f&#39;{axis}axis&#39;
            if axis in self.axis_range:
                layout[axis_name][&#39;range&#39;] = self.axis_range[axis]
            else:
                layout[axis_name][&#39;autorange&#39;] = True

        return layout

    def apply_custom_layout(self, layout):
        &#34;&#34;&#34;Extend and/or override layout with custom settings.

        Args:
            layout: base layout dictionary. Typically from self.create_layout()

        Returns:
            dict: layout for Dash figure

        &#34;&#34;&#34;
        for parent_key, sub_key, value in self.layout_overrides:
            if sub_key is not None:
                layout[parent_key][sub_key] = value
            else:
                layout[parent_key] = value

        return layout</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="dash_charts.coordinate_chart.CoordinateChart" href="coordinate_chart.html#dash_charts.coordinate_chart.CoordinateChart">CoordinateChart</a></li>
<li><a title="dash_charts.gantt_chart.GanttChart" href="gantt_chart.html#dash_charts.gantt_chart.GanttChart">GanttChart</a></li>
<li><a title="dash_charts.pareto_chart.ParetoChart" href="pareto_chart.html#dash_charts.pareto_chart.ParetoChart">ParetoChart</a></li>
<li><a title="dash_charts.scatter_line_charts.FittedChart" href="scatter_line_charts.html#dash_charts.scatter_line_charts.FittedChart">FittedChart</a></li>
<li><a title="dash_charts.scatter_line_charts.RollingChart" href="scatter_line_charts.html#dash_charts.scatter_line_charts.RollingChart">RollingChart</a></li>
<li><a title="dash_charts.time_vis_chart.TimeVisChart" href="time_vis_chart.html#dash_charts.time_vis_chart.TimeVisChart">TimeVisChart</a></li>
<li><a title="dash_charts.utils_fig.MarginalChart" href="#dash_charts.utils_fig.MarginalChart">MarginalChart</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="dash_charts.utils_fig.CustomChart.annotations"><code class="name">var <span class="ident">annotations</span></code></dt>
<dd>
<div class="desc"><p>Store annotations. Default is an empty list.</p>
<p>See documentation: <a href="https://plot.ly/python/reference/#layout-annotations">https://plot.ly/python/reference/#layout-annotations</a></p></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="dash_charts.utils_fig.CustomChart.axis_range"><code class="name">var <span class="ident">axis_range</span></code></dt>
<dd>
<div class="desc"><p>Specify x/y axis range or leave as empty dictionary for autorange.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>dictionary potentially with keys <code>(x, y)</code></dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def axis_range(self):
    &#34;&#34;&#34;Specify x/y axis range or leave as empty dictionary for autorange.

    Returns:
        dict: dictionary potentially with keys `(x, y)`

    &#34;&#34;&#34;
    return self._axis_range</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="dash_charts.utils_fig.CustomChart.apply_custom_layout"><code class="name flex">
<span>def <span class="ident">apply_custom_layout</span></span>(<span>self, layout)</span>
</code></dt>
<dd>
<div class="desc"><p>Extend and/or override layout with custom settings.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>layout</code></strong></dt>
<dd>base layout dictionary. Typically from self.create_layout()</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>layout for Dash figure</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def apply_custom_layout(self, layout):
    &#34;&#34;&#34;Extend and/or override layout with custom settings.

    Args:
        layout: base layout dictionary. Typically from self.create_layout()

    Returns:
        dict: layout for Dash figure

    &#34;&#34;&#34;
    for parent_key, sub_key, value in self.layout_overrides:
        if sub_key is not None:
            layout[parent_key][sub_key] = value
        else:
            layout[parent_key] = value

    return layout</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.CustomChart.create_figure"><code class="name flex">
<span>def <span class="ident">create_figure</span></span>(<span>self, df_raw, **kwargs_data)</span>
</code></dt>
<dd>
<div class="desc"><p>Create the figure dictionary.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>df_raw</code></strong></dt>
<dd>data to pass to formatter method</dd>
<dt><strong><code>kwargs_data</code></strong></dt>
<dd>keyword arguments to pass to the data formatter method</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>keys <code>data</code> and <code>layout</code> for Dash</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_figure(self, df_raw, **kwargs_data):
    &#34;&#34;&#34;Create the figure dictionary.

    Args:
        df_raw: data to pass to formatter method
        kwargs_data: keyword arguments to pass to the data formatter method

    Returns:
        dict: keys `data` and `layout` for Dash

    &#34;&#34;&#34;
    return {
        &#39;data&#39;: self.create_traces(df_raw, **kwargs_data),
        &#39;layout&#39;: go.Layout(self.apply_custom_layout(self.create_layout())),
    }</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.CustomChart.create_layout"><code class="name flex">
<span>def <span class="ident">create_layout</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Return the standard layout. Can be overridden and modified when inherited.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>layout for Dash figure</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_layout(self):
    &#34;&#34;&#34;Return the standard layout. Can be overridden and modified when inherited.

    Returns:
        dict: layout for Dash figure

    &#34;&#34;&#34;
    layout = {
        &#39;annotations&#39;: self.annotations,
        &#39;title&#39;: go.layout.Title(text=self.title),
        &#39;xaxis&#39;: {
            &#39;automargin&#39;: True,
            &#39;title&#39;: self.labels[&#39;x&#39;],
        },
        &#39;yaxis&#39;: {
            &#39;automargin&#39;: True,
            &#39;title&#39;: self.labels[&#39;y&#39;],
            &#39;zeroline&#39;: True,
        },
        &#39;legend&#39;: {&#39;orientation&#39;: &#39;h&#39;, &#39;y&#39;: -0.25},  # below XAxis label
        &#39;hovermode&#39;: &#39;closest&#39;,
    }

    # Optionally apply the specified range
    for axis in [&#39;x&#39;, &#39;y&#39;]:
        axis_name = f&#39;{axis}axis&#39;
        if axis in self.axis_range:
            layout[axis_name][&#39;range&#39;] = self.axis_range[axis]
        else:
            layout[axis_name][&#39;autorange&#39;] = True

    return layout</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.CustomChart.create_traces"><code class="name flex">
<span>def <span class="ident">create_traces</span></span>(<span>self, df_raw, **kwargs_data)</span>
</code></dt>
<dd>
<div class="desc"><p>Return traces for plotly chart.</p>
<p>Should return, list: trace data points. List may be empty</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>df_raw</code></strong></dt>
<dd>data to pass to formatter method</dd>
<dt><strong><code>kwargs_data</code></strong></dt>
<dd>keyword arguments to pass to the data formatter method</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>NotImplementedError</code></dt>
<dd>Must be overridden by child class</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_traces(self, df_raw, **kwargs_data):
    &#34;&#34;&#34;Return traces for plotly chart.

    Should return, list: trace data points. List may be empty

    Args:
        df_raw: data to pass to formatter method
        kwargs_data: keyword arguments to pass to the data formatter method

    Raises:
        NotImplementedError: Must be overridden by child class

    &#34;&#34;&#34;
    raise NotImplementedError(&#39;create_traces must be implemented by child class&#39;)  # pragma: no cover</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.CustomChart.initialize_mutables"><code class="name flex">
<span>def <span class="ident">initialize_mutables</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Initialize the mutable data members to prevent modifying one attribute and impacting all instances.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def initialize_mutables(self):
    &#34;&#34;&#34;Initialize the mutable data members to prevent modifying one attribute and impacting all instances.&#34;&#34;&#34;
    pass</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="dash_charts.utils_fig.MarginalChart"><code class="flex name class">
<span>class <span class="ident">MarginalChart</span></span>
<span>(</span><span>*, title, xlabel, ylabel, layout_overrides=())</span>
</code></dt>
<dd>
<div class="desc"><p>Base Class for Custom Charts with Marginal X and Marginal Y Plots.</p>
<p>Initialize Custom Dash Chart and store parameters as data members.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>title</code></strong></dt>
<dd>String title for chart (can be an empty string for blank)</dd>
<dt><strong><code>xlabel</code></strong></dt>
<dd>XAxis string label (can be an empty string for blank)</dd>
<dt><strong><code>ylabel</code></strong></dt>
<dd>YAxis string label (can be an empty string for blank)</dd>
<dt><strong><code>layout_overrides</code></strong></dt>
<dd>Custom parameters in format [ParentKey, SubKey, Value] to customize 'go.layout'</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class MarginalChart(CustomChart):  # noqa: H601
    &#34;&#34;&#34;Base Class for Custom Charts with Marginal X and Marginal Y Plots.&#34;&#34;&#34;

    def create_figure(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Create the figure dictionary.

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Returns:
            dict: Dash figure object

        &#34;&#34;&#34;
        # Initialize figure with subplots
        fig = make_subplots(
            rows=2, cols=2,
            shared_xaxes=True, shared_yaxes=True,
            vertical_spacing=0.02, horizontal_spacing=0.02,
            row_width=[0.8, 0.2], column_width=[0.8, 0.2],
        )
        # Populate the traces of each subplot
        traces = [
            (self.create_traces, 2, 1),
            (self.create_marg_top, 1, 1),
            (self.create_marg_right, 2, 2),
        ]
        for trace_func, row, col in traces:
            for trace in trace_func(df_raw, **kwargs_data):
                fig.add_trace(trace, row, col)
        # Apply axis labels
        fig.update_xaxes(title_text=self.labels[&#39;x&#39;], row=2, col=1)
        fig.update_yaxes(title_text=self.labels[&#39;y&#39;], row=2, col=1)
        # Replace the default blue/white grid introduced in Plotly v4
        fig.update_xaxes(showgrid=True, gridcolor=&#39;white&#39;)
        fig.update_yaxes(showgrid=True, gridcolor=&#39;white&#39;)
        fig[&#39;layout&#39;].update(self.apply_custom_layout(self.create_layout()))
        return fig

    def create_traces(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Return traces for the main plotly chart.

        Should return, list: trace data points. List may be empty

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Raises:
            NotImplementedError: Must be overridden by child class

        &#34;&#34;&#34;
        raise NotImplementedError(&#39;create_traces must be implemented by child class&#39;)  # pragma: no cover

    def create_marg_top(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Return traces for the top marginal chart.

        Should return, list: trace data points. List may be empty

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Raises:
            NotImplementedError: Must be overridden by child class

        &#34;&#34;&#34;
        raise NotImplementedError(&#39;create_marg_top must be implemented by child class&#39;)  # pragma: no cover

    def create_marg_right(self, df_raw, **kwargs_data):
        &#34;&#34;&#34;Return traces for the right marginal chart.

        Should return, list: trace data points. List may be empty

        Args:
            df_raw: data to pass to formatter method
            kwargs_data: keyword arguments to pass to the data formatter method

        Raises:
            NotImplementedError: Must be overridden by child class

        &#34;&#34;&#34;
        raise NotImplementedError(&#39;create_marg_right must be implemented by child class&#39;)  # pragma: no cover

    def create_layout(self, *, bg_color=&#39;#F0F0F0&#39;):
        &#34;&#34;&#34;Remove axis lables from base layout as they would be applied to (row=1,col=1).

        Args:
            bg_color: Background color for the chart. Default is white for light themes

        Returns:
            dict: updated layout for Dash figure

        &#34;&#34;&#34;
        layout = super().create_layout()
        layout[&#39;xaxis&#39;][&#39;title&#39;] = &#39;&#39;
        layout[&#39;yaxis&#39;][&#39;title&#39;] = &#39;&#39;
        layout[&#39;plot_bgcolor&#39;] = bg_color
        return layout</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="dash_charts.utils_fig.CustomChart" href="#dash_charts.utils_fig.CustomChart">CustomChart</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="dash_charts.utils_fig.MarginalChart.annotations"><code class="name">var <span class="ident">annotations</span></code></dt>
<dd>
<p class="inheritance">
<em>Inherited from:</em>
<code><a title="dash_charts.utils_fig.CustomChart" href="#dash_charts.utils_fig.CustomChart">CustomChart</a></code>.<code><a title="dash_charts.utils_fig.CustomChart.annotations" href="#dash_charts.utils_fig.CustomChart.annotations">annotations</a></code>
</p>
<div class="desc inherited"><p>Store annotations. Default is an empty list …</p></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="dash_charts.utils_fig.MarginalChart.axis_range"><code class="name">var <span class="ident">axis_range</span></code></dt>
<dd>
<p class="inheritance">
<em>Inherited from:</em>
<code><a title="dash_charts.utils_fig.CustomChart" href="#dash_charts.utils_fig.CustomChart">CustomChart</a></code>.<code><a title="dash_charts.utils_fig.CustomChart.axis_range" href="#dash_charts.utils_fig.CustomChart.axis_range">axis_range</a></code>
</p>
<div class="desc inherited"><p>Specify x/y axis range or leave as empty dictionary for autorange …</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="dash_charts.utils_fig.MarginalChart.apply_custom_layout"><code class="name flex">
<span>def <span class="ident">apply_custom_layout</span></span>(<span>self, layout)</span>
</code></dt>
<dd>
<p class="inheritance">
<em>Inherited from:</em>
<code><a title="dash_charts.utils_fig.CustomChart" href="#dash_charts.utils_fig.CustomChart">CustomChart</a></code>.<code><a title="dash_charts.utils_fig.CustomChart.apply_custom_layout" href="#dash_charts.utils_fig.CustomChart.apply_custom_layout">apply_custom_layout</a></code>
</p>
<div class="desc inherited"><p>Extend and/or override layout with custom settings …</p></div>
</dd>
<dt id="dash_charts.utils_fig.MarginalChart.create_figure"><code class="name flex">
<span>def <span class="ident">create_figure</span></span>(<span>self, df_raw, **kwargs_data)</span>
</code></dt>
<dd>
<div class="desc"><p>Create the figure dictionary.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>df_raw</code></strong></dt>
<dd>data to pass to formatter method</dd>
<dt><strong><code>kwargs_data</code></strong></dt>
<dd>keyword arguments to pass to the data formatter method</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>Dash figure object</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_figure(self, df_raw, **kwargs_data):
    &#34;&#34;&#34;Create the figure dictionary.

    Args:
        df_raw: data to pass to formatter method
        kwargs_data: keyword arguments to pass to the data formatter method

    Returns:
        dict: Dash figure object

    &#34;&#34;&#34;
    # Initialize figure with subplots
    fig = make_subplots(
        rows=2, cols=2,
        shared_xaxes=True, shared_yaxes=True,
        vertical_spacing=0.02, horizontal_spacing=0.02,
        row_width=[0.8, 0.2], column_width=[0.8, 0.2],
    )
    # Populate the traces of each subplot
    traces = [
        (self.create_traces, 2, 1),
        (self.create_marg_top, 1, 1),
        (self.create_marg_right, 2, 2),
    ]
    for trace_func, row, col in traces:
        for trace in trace_func(df_raw, **kwargs_data):
            fig.add_trace(trace, row, col)
    # Apply axis labels
    fig.update_xaxes(title_text=self.labels[&#39;x&#39;], row=2, col=1)
    fig.update_yaxes(title_text=self.labels[&#39;y&#39;], row=2, col=1)
    # Replace the default blue/white grid introduced in Plotly v4
    fig.update_xaxes(showgrid=True, gridcolor=&#39;white&#39;)
    fig.update_yaxes(showgrid=True, gridcolor=&#39;white&#39;)
    fig[&#39;layout&#39;].update(self.apply_custom_layout(self.create_layout()))
    return fig</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.MarginalChart.create_layout"><code class="name flex">
<span>def <span class="ident">create_layout</span></span>(<span>self, *, bg_color='#F0F0F0')</span>
</code></dt>
<dd>
<div class="desc"><p>Remove axis lables from base layout as they would be applied to (row=1,col=1).</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>bg_color</code></strong></dt>
<dd>Background color for the chart. Default is white for light themes</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>updated layout for Dash figure</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_layout(self, *, bg_color=&#39;#F0F0F0&#39;):
    &#34;&#34;&#34;Remove axis lables from base layout as they would be applied to (row=1,col=1).

    Args:
        bg_color: Background color for the chart. Default is white for light themes

    Returns:
        dict: updated layout for Dash figure

    &#34;&#34;&#34;
    layout = super().create_layout()
    layout[&#39;xaxis&#39;][&#39;title&#39;] = &#39;&#39;
    layout[&#39;yaxis&#39;][&#39;title&#39;] = &#39;&#39;
    layout[&#39;plot_bgcolor&#39;] = bg_color
    return layout</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.MarginalChart.create_marg_right"><code class="name flex">
<span>def <span class="ident">create_marg_right</span></span>(<span>self, df_raw, **kwargs_data)</span>
</code></dt>
<dd>
<div class="desc"><p>Return traces for the right marginal chart.</p>
<p>Should return, list: trace data points. List may be empty</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>df_raw</code></strong></dt>
<dd>data to pass to formatter method</dd>
<dt><strong><code>kwargs_data</code></strong></dt>
<dd>keyword arguments to pass to the data formatter method</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>NotImplementedError</code></dt>
<dd>Must be overridden by child class</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_marg_right(self, df_raw, **kwargs_data):
    &#34;&#34;&#34;Return traces for the right marginal chart.

    Should return, list: trace data points. List may be empty

    Args:
        df_raw: data to pass to formatter method
        kwargs_data: keyword arguments to pass to the data formatter method

    Raises:
        NotImplementedError: Must be overridden by child class

    &#34;&#34;&#34;
    raise NotImplementedError(&#39;create_marg_right must be implemented by child class&#39;)  # pragma: no cover</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.MarginalChart.create_marg_top"><code class="name flex">
<span>def <span class="ident">create_marg_top</span></span>(<span>self, df_raw, **kwargs_data)</span>
</code></dt>
<dd>
<div class="desc"><p>Return traces for the top marginal chart.</p>
<p>Should return, list: trace data points. List may be empty</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>df_raw</code></strong></dt>
<dd>data to pass to formatter method</dd>
<dt><strong><code>kwargs_data</code></strong></dt>
<dd>keyword arguments to pass to the data formatter method</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>NotImplementedError</code></dt>
<dd>Must be overridden by child class</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_marg_top(self, df_raw, **kwargs_data):
    &#34;&#34;&#34;Return traces for the top marginal chart.

    Should return, list: trace data points. List may be empty

    Args:
        df_raw: data to pass to formatter method
        kwargs_data: keyword arguments to pass to the data formatter method

    Raises:
        NotImplementedError: Must be overridden by child class

    &#34;&#34;&#34;
    raise NotImplementedError(&#39;create_marg_top must be implemented by child class&#39;)  # pragma: no cover</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.MarginalChart.create_traces"><code class="name flex">
<span>def <span class="ident">create_traces</span></span>(<span>self, df_raw, **kwargs_data)</span>
</code></dt>
<dd>
<div class="desc"><p>Return traces for the main plotly chart.</p>
<p>Should return, list: trace data points. List may be empty</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>df_raw</code></strong></dt>
<dd>data to pass to formatter method</dd>
<dt><strong><code>kwargs_data</code></strong></dt>
<dd>keyword arguments to pass to the data formatter method</dd>
</dl>
<h2 id="raises">Raises</h2>
<dl>
<dt><code>NotImplementedError</code></dt>
<dd>Must be overridden by child class</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create_traces(self, df_raw, **kwargs_data):
    &#34;&#34;&#34;Return traces for the main plotly chart.

    Should return, list: trace data points. List may be empty

    Args:
        df_raw: data to pass to formatter method
        kwargs_data: keyword arguments to pass to the data formatter method

    Raises:
        NotImplementedError: Must be overridden by child class

    &#34;&#34;&#34;
    raise NotImplementedError(&#39;create_traces must be implemented by child class&#39;)  # pragma: no cover</code></pre>
</details>
</dd>
<dt id="dash_charts.utils_fig.MarginalChart.initialize_mutables"><code class="name flex">
<span>def <span class="ident">initialize_mutables</span></span>(<span>self)</span>
</code></dt>
<dd>
<p class="inheritance">
<em>Inherited from:</em>
<code><a title="dash_charts.utils_fig.CustomChart" href="#dash_charts.utils_fig.CustomChart">CustomChart</a></code>.<code><a title="dash_charts.utils_fig.CustomChart.initialize_mutables" href="#dash_charts.utils_fig.CustomChart.initialize_mutables">initialize_mutables</a></code>
</p>
<div class="desc inherited"><p>Initialize the mutable data members to prevent modifying one attribute and impacting all instances.</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="dash_charts" href="index.html">dash_charts</a></code></li>
</ul>
</li>
<li><h3><a href="#header-variables">Global variables</a></h3>
<ul class="">
<li><code><a title="dash_charts.utils_fig.FIGURE_PLACEHOLDER" href="#dash_charts.utils_fig.FIGURE_PLACEHOLDER">FIGURE_PLACEHOLDER</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="dash_charts.utils_fig.check_raw_data" href="#dash_charts.utils_fig.check_raw_data">check_raw_data</a></code></li>
<li><code><a title="dash_charts.utils_fig.convert_matplolib" href="#dash_charts.utils_fig.convert_matplolib">convert_matplolib</a></code></li>
<li><code><a title="dash_charts.utils_fig.make_dict_an" href="#dash_charts.utils_fig.make_dict_an">make_dict_an</a></code></li>
<li><code><a title="dash_charts.utils_fig.min_graph" href="#dash_charts.utils_fig.min_graph">min_graph</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="dash_charts.utils_fig.CustomChart" href="#dash_charts.utils_fig.CustomChart">CustomChart</a></code></h4>
<ul class="two-column">
<li><code><a title="dash_charts.utils_fig.CustomChart.annotations" href="#dash_charts.utils_fig.CustomChart.annotations">annotations</a></code></li>
<li><code><a title="dash_charts.utils_fig.CustomChart.apply_custom_layout" href="#dash_charts.utils_fig.CustomChart.apply_custom_layout">apply_custom_layout</a></code></li>
<li><code><a title="dash_charts.utils_fig.CustomChart.axis_range" href="#dash_charts.utils_fig.CustomChart.axis_range">axis_range</a></code></li>
<li><code><a title="dash_charts.utils_fig.CustomChart.create_figure" href="#dash_charts.utils_fig.CustomChart.create_figure">create_figure</a></code></li>
<li><code><a title="dash_charts.utils_fig.CustomChart.create_layout" href="#dash_charts.utils_fig.CustomChart.create_layout">create_layout</a></code></li>
<li><code><a title="dash_charts.utils_fig.CustomChart.create_traces" href="#dash_charts.utils_fig.CustomChart.create_traces">create_traces</a></code></li>
<li><code><a title="dash_charts.utils_fig.CustomChart.initialize_mutables" href="#dash_charts.utils_fig.CustomChart.initialize_mutables">initialize_mutables</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="dash_charts.utils_fig.MarginalChart" href="#dash_charts.utils_fig.MarginalChart">MarginalChart</a></code></h4>
<ul class="two-column">
<li><code><a title="dash_charts.utils_fig.MarginalChart.annotations" href="#dash_charts.utils_fig.MarginalChart.annotations">annotations</a></code></li>
<li><code><a title="dash_charts.utils_fig.MarginalChart.apply_custom_layout" href="#dash_charts.utils_fig.MarginalChart.apply_custom_layout">apply_custom_layout</a></code></li>
<li><code><a title="dash_charts.utils_fig.MarginalChart.axis_range" href="#dash_charts.utils_fig.MarginalChart.axis_range">axis_range</a></code></li>
<li><code><a title="dash_charts.utils_fig.MarginalChart.create_figure" href="#dash_charts.utils_fig.MarginalChart.create_figure">create_figure</a></code></li>
<li><code><a title="dash_charts.utils_fig.MarginalChart.create_layout" href="#dash_charts.utils_fig.MarginalChart.create_layout">create_layout</a></code></li>
<li><code><a title="dash_charts.utils_fig.MarginalChart.create_marg_right" href="#dash_charts.utils_fig.MarginalChart.create_marg_right">create_marg_right</a></code></li>
<li><code><a title="dash_charts.utils_fig.MarginalChart.create_marg_top" href="#dash_charts.utils_fig.MarginalChart.create_marg_top">create_marg_top</a></code></li>
<li><code><a title="dash_charts.utils_fig.MarginalChart.create_traces" href="#dash_charts.utils_fig.MarginalChart.create_traces">create_traces</a></code></li>
<li><code><a title="dash_charts.utils_fig.MarginalChart.initialize_mutables" href="#dash_charts.utils_fig.MarginalChart.initialize_mutables">initialize_mutables</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.4</a>.</p>
</footer>
</body>
</html>